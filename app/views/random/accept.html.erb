<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=geometry"></script>



<div class="col-md-6">
      <p class="lead">Your destination is ... </p>
      <h1><%= @name %></h1>
      <% if (@img_url) %>
      <p> <%= image_tag @img_url, class: "img-thumbnail" %> </p>
      <% else %>
      <p><%= image_tag @img_placeholder, class: "img-thumbnail" %></p>
      <% end %>
      <p class="lead" id="confirm">test</p>
    </div>

<script>

var ulat = <%= @user_lat %>;
var ulng = <%= @user_lng %>;
var dlat = <%= @destlat %>;
var dlong = <%= @destlong %>;

var p1 = new google.maps.LatLng(ulat, ulng);
var p2 = new google.maps.LatLng(dlat, dlong);

var d = calcDistance(p1, p2);
if(d <0.1){
	document.getElementById("confirm").innerHTML = "You are at the destination!";
}else{
	document.getElementById("confirm").innerHTML = "You are not currently at the destination";
}

//calculates distance between two points in km's
function calcDistance(p1, p2) {
  return (google.maps.geometry.spherical.computeDistanceBetween(p1, p2) / 1000).toFixed(2);
}

</script>

<p id="test"></p>